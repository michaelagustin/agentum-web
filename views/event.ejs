<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= isPrivate ? 'Private Event' : event.title %> — Agentum</title>

  <!-- Open Graph -->
  <meta property="og:title" content="<%= isPrivate ? 'Private Event on Agentum' : event.title %>" />
  <meta property="og:description" content="<%= isPrivate ? 'Open in Agentum to view this event.' : [formattedDate, event.location].filter(Boolean).join(' · ') %>" />
  <% if (!isPrivate && avatarSrc) { %>
  <meta property="og:image" content="<%= avatarSrc %>" />
  <% } %>
  <meta property="og:url" content="<%= canonicalUrl %>" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Agentum" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="<%= isPrivate ? 'Private Event on Agentum' : event.title %>" />
  <meta name="twitter:description" content="<%= isPrivate ? 'Open in Agentum to view this event.' : [formattedDate, event.location].filter(Boolean).join(' · ') %>" />
  <% if (!isPrivate && avatarSrc) { %>
  <meta name="twitter:image" content="<%= avatarSrc %>" />
  <% } %>

  <!-- Smart App Banner -->
  <meta name="apple-itunes-app" content="app-argument=<%= deepLink %>">

  <link rel="canonical" href="<%= canonicalUrl %>" />
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="16" fill="#7C3AED"/>
          <text x="16" y="21" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="system-ui">A</text>
        </svg>
        <span class="logo-text">Agentum</span>
      </div>

      <% if (isPrivate) { %>
      <div class="private-event">
        <div class="lock-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#7C3AED" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </div>
        <h1 class="name">Private Event</h1>
        <p class="subtitle">Open in Agentum to view this event.</p>
      </div>
      <% } else { %>
      <div class="event">
        <% if (avatarSrc) { %>
        <img class="event-image" src="<%= avatarSrc %>" alt="<%= event.title %>" />
        <% } %>

        <h1 class="name"><%= event.title %></h1>

        <% if (formattedDate) { %>
        <p class="event-date">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
          <%= formattedDate %>
        </p>
        <% } %>

        <% if (event.location) { %>
        <p class="location">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          <%= event.location %>
        </p>
        <% } %>

        <% if (description) { %>
        <p class="description"><%= description %></p>
        <% } %>
      </div>
      <% } %>

      <button class="cta-button" onclick="openInApp()">Open in Agentum</button>

      <p class="footer-text">
        Don't have the app? <a href="<%= appStoreUrl %>">Download Agentum</a>
      </p>
    </div>
  </div>

  <script>
    function openInApp() {
      window.location = '<%= deepLink %>';
      setTimeout(function() {
        window.location = '<%= appStoreUrl %>';
      }, 1500);
    }
  </script>
</body>
</html>
